Changes in component 'nf-core/gawk'
'modules/nf-core/gawk/environment.yml' is unchanged
'modules/nf-core/gawk/meta.yml' is unchanged
Changes in 'gawk/main.nf':
--- modules/nf-core/gawk/main.nf
+++ modules/nf-core/gawk/main.nf
@@ -10,6 +10,7 @@
     input:
     tuple val(meta), path(input, arity: '0..*')
     path(program_file)
+    val(disable_redirect_output)
 
     output:
     tuple val(meta), path("${prefix}.${suffix}"), emit: output
@@ -21,14 +22,16 @@
     script:
     def args  = task.ext.args  ?: '' // args is used for the main arguments of the tool
     def args2 = task.ext.args2 ?: '' // args2 is used to specify a program when no program file has been given
-    prefix = task.ext.prefix ?: "${meta.id}"
-    suffix = task.ext.suffix ?: "${input.collect{ it.getExtension()}.get(0)}" // use the first extension of the input files
+    prefix    = task.ext.prefix ?: "${meta.id}"
+    suffix    = task.ext.suffix ?: "${input.collect{ it.getExtension()}.get(0)}" // use the first extension of the input files
 
-    program   = program_file ? "-f ${program_file}" : "${args2}"
-    lst_gz    = input.collect{ it.getExtension().endsWith("gz") }
-    unzip     = lst_gz.contains(false) ? "" : "find ${input} -exec zcat {} \\; | \\"
-    input_cmd = unzip ? "" : "${input}"
-    output_cmd = suffix.endsWith("gz") ? "| gzip" : ""
+    program    = program_file ? "-f ${program_file}" : "${args2}"
+    lst_gz     = input.findResults{ it.getExtension().endsWith("gz") ? it.toString() : null }
+    unzip      = lst_gz ? "gunzip -q -f ${lst_gz.join(" ")}" : ""
+    input_cmd  = input.collect { it.toString() - ~/\.gz$/ }.join(" ")
+    output_cmd = suffix.endsWith("gz") ? "| gzip > ${prefix}.${suffix}" : "> ${prefix}.${suffix}"
+    output     = disable_redirect_output ? "" : output_cmd
+    cleanup    = lst_gz ? "rm ${lst_gz.collect{ it - ~/\.gz$/ }.join(" ")}" : ""
 
     input.collect{
         assert it.name != "${prefix}.${suffix}" : "Input and output names are the same, set prefix in module configuration to disambiguate!"
@@ -36,12 +39,14 @@
 
     """
     ${unzip}
+
     awk \\
         ${args} \\
         ${program} \\
         ${input_cmd} \\
-        ${output_cmd} \\
-        > ${prefix}.${suffix}
+        ${output}
+
+    ${cleanup}
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -62,4 +67,4 @@
         gawk: \$(awk -Wversion | sed '1!d; s/.*Awk //; s/,.*//')
     END_VERSIONS
     """
-}
+}
'modules/nf-core/gawk/tests/main.nf.test.snap' is unchanged
'modules/nf-core/gawk/tests/tags.yml' is unchanged
'modules/nf-core/gawk/tests/nextflow.config' is unchanged
'modules/nf-core/gawk/tests/main.nf.test' is unchanged
************************************************************
